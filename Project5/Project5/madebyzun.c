#include <stdio.h>
#define ESC '*'
#define N 256*256

unsigned char* encoding(unsigned char *num)
{
	unsigned char *temp = num;
	unsigned char data;
	static unsigned char result[N * 2] = { 0, };
	int cnt = 0;
	int i = 0;
	data = *temp;
	printf("인코딩 한 후  : ");
	while (temp != 0)
	{
		if (data != *temp)
		{
			result[i++] = cnt;
			result[i++] = data;	
			printf("%d%c", cnt, data);
			data = *temp;
			cnt = 1;	
		}
		else
		{
			cnt++;
		}

		if (*temp == 0)
		{
			return result;
		}
		temp++;
	}
}
unsigned char * decoding(unsigned char *num)
{
	unsigned char *temp = num;
	int i = 0, idx = 0, rei = 0;
	int cnt = num[idx++];
	static unsigned char result[N * 2] = { 0, };
	unsigned char data = num[idx++];
	while (temp != 0)
	{
		for (i = 0; i < cnt; i++)
		{
			printf("%c", data);
			result[rei++] = data;
		}
		cnt = num[idx++];
		data = num[idx++];

		if (data == 0)
		{
			return result;
		}
	}
}
int main(void)
{
	unsigned char num[N] = { '1','1','1','1','1','1','1','1','1','1','1','1','1','1','1','1','1','1','1','1','1','1','1','1','1','1','1','1','1','1','1','1','1','1','1','1','1','1','1','1','1','1','1','1','1','1','1','1','1','1','1','1','1','1','1','1','1','1','1','1','1','1','1','1','1','1','1','1','1','1','1','1','1','1','1','1','1','1','1','1','1','1','1','1','1','1','1','1','1','1','1','1','1','1','1','1','1','1','1','1','1','1','1','1','1','1','1','1','1','1','1','1','1','1','1','1','1','1','1','1','1','1','1','1','1','1','1','1','1','1','1','1','1','1','1','1','1','1','1','1','1','1','1','1','1','1','1','1','1','1','1','1','1','1','1','1','1','1','1','1','1','1','1','1','1','1','1','1','1','1','1','1','1','1','1','1','1','1','1','1','1','1','1','1','1','1','1','1','1','1','1','1','1','1','1','1','1','1','1','1','1','1','1','1','1','1','1','1','1','1','1','1','1','1','1','1','1','1','1','1','1','1','1','1','1','1','1','1','1','1','1','1','1','1','1','1','1','1','1','1','1','1','1','1','1','1','1','1','1','1','1','1','1','1','1','1','1','1','1','1','1','1','1','1','1','1','1','1','1','1','1','1','1','1','1','1','1','1','1','1','1','1','1','1','1','1','1','1','1','1','1','1','1','1','1','1','1','1' ,'1' ,'1' ,
	   '1' ,'1' ,'1' ,'1' ,'1' ,'1', '0','0',
	   '1','1','1','1','1','1','0','0',      0 };

	printf("인코딩 하기전 : %s\n", num);

	unsigned char * btemp = encoding(num);
	printf("\n");
	printf("인코딩 하기전 : ");
	unsigned char * atemp = decoding(btemp);
	printf("\n");
	printf("인코딩 하기전 : %s\n", atemp);
	return 0;
}